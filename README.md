# OpenMRS Change Data Capture | CDC

The integration framework [Apache Camel](https://camel.apache.org/) provides a set of components integrating Debezium ([Mysql](https://camel.apache.org/components/latest/debezium-mysql-component.html) and other connectors) with Apache Camel.
This example demonstrates dockerized OpenMRS refApp and an integration pipeline capturing changes in the database generated by the application. We've whitelisted the following tables:
  * Encounter
  * Obs
## Topology

The example consists of only 3 components:


* Apache Camel CDC pipeline that
  * captures database changes
  * converts the raw changes into domain Java classes
  * TODO - Restructure
  * TODO - Send to spark
* OpenMRS
* MySql


## How to run

Build the pipeline and start the docker stack by running:

```
# Terminal One
$ mvn clean install
$ docker-compose up --build # or 
$ mvn exec:java -pl dbz-camel # during dev

```

Make some updates on the database/OpenMRS, you should be able to view these changes through the logs for the cdc-pipeline container